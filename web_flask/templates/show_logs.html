<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Logs</title>
    <link rel="stylesheet" href="../static/styles/logs.css"> <!-- Linking to external CSS file -->
</head>
<body>

<header>
    <div class="navbar">
        <div class="logo">
            <img src="../static/images/logo.png" alt="Logo">
        </div>
        <h1> LogIt</h1>
    </div>
    <nav>
        <a href="#">Home</a>
        <a href="#">About</a>
        <a href="#">Contacts</a>
    </nav>
</header>

<div class="content">
    <div class="logs">
        <h2>All Logs</h2>
        <table id="logs-table">
            <thead>
                <tr id="table-headers">
                    <!-- Table headers will be dynamically inserted here -->
                </tr>
            </thead>
            <tbody id="table-body">
                <!-- Log data will be dynamically inserted here -->
            </tbody>
        </table>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const tableHeadersRow = document.getElementById('table-headers');
        const tableBody = document.getElementById('table-body');

        // Fetch log data from backend
        fetch('/logs')
        .then(response => response.json())
        .then(data => {
            if (data.length === 0) {
                // Display message if there are no logs
                tableBody.innerHTML = '<tr><td colspan="2">No logs to display</td></tr>';
            } else {
                // Dynamically generate table headers based on fields in the first log
                const fields = Object.keys(data[0]);
                fields.forEach(field => {
                    const th = document.createElement('th');
                    th.textContent = field;
                    tableHeadersRow.appendChild(th);
                });

                // Dynamically generate table rows for each log
                data.forEach(log => {
                    const tr = document.createElement('tr');
                    fields.forEach(field => {
                        const td = document.createElement('td');
                        td.textContent = log[field];
                        tr.appendChild(td);
                    });
                    tableBody.appendChild(tr);
                });
            }
        })
        .catch(error => console.error('Error fetching logs:', error));
    });
</script>

</body>
</html>
